<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Luban Fragrance | The Essence of Elegance</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Inter:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            /* Luxury Color Palette - Deeper, more sophisticated tones */
            --bg-dark: #020606;
            --bg-accent: #080d0c;
            --gold-primary: #cba35c;
            --gold-bright: #e9c46a;
            --gold-muted: rgba(203, 163, 92, 0.4);
            --text-white: #f8f8f8;
            --text-dim: rgba(248, 248, 248, 0.7);
            --border-gold: rgba(203, 163, 92, 0.15);
            --border-white: rgba(255, 255, 255, 0.08);
            
            /* Motion & Easing - Signature Luxury Timing */
            --transition-smooth: all 0.8s cubic-bezier(0.2, 1, 0.2, 1);
            --transition-fast: all 0.4s cubic-bezier(0.2, 1, 0.2, 1);
            --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
            --ease-luxury: cubic-bezier(0.3, 0, 0.2, 1);
            
            /* Sizing & Spacing - Responsive Variable */
            --nav-height: 110px;
            --container-padding: 12%;
            
            /* Shadows & Depth */
            --shadow-subtle: 0 10px 40px rgba(0,0,0,0.6);
            --shadow-medium: 0 20px 60px rgba(0,0,0,0.8);
            --shadow-gold: 0 0 30px rgba(203, 163, 92, 0.1);
            --shadow-glow: 0 15px 45px rgba(0, 0, 0, 0.7), 0 0 25px rgba(203, 163, 92, 0.15);
        }

        @media (max-width: 1200px) {
            :root { --container-padding: 8%; --nav-height: 90px; }
        }
        @media (max-width: 768px) {
            :root { --container-padding: 6%; --nav-height: 80px; }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            outline: none;
        }

        html {
            scroll-behavior: smooth;
            /* Precise offset for sticky header navigation */
            scroll-padding-top: calc(var(--nav-height) + 20px);
            scrollbar-width: thin;
            scrollbar-color: var(--gold-primary) var(--bg-dark);
            overflow-x: hidden;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-white);
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            line-height: 1.7;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            width: 100%;
        }

        /* View Entrance Animation - Makes switching feel premium */
        #main-view, #details-view, #checkout-view {
            animation: luxuryFadeIn 0.8s var(--ease-luxury) both;
            will-change: opacity, transform;
        }

        @keyframes luxuryFadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Section Offsets for Sticky Header Alignment */
        #hero, #shop, #about, #contact, #details-view, #checkout-view {
            scroll-margin-top: var(--nav-height);
        }

        /* Desktop Custom Cursor - Refined and Minimal */
        @media (min-width: 1200px) {
            body:not(.no-cursor) * { cursor: none !important; }
            #custom-cursor {
                width: 12px;
                height: 12px;
                background: var(--gold-primary);
                border-radius: 50%;
                position: fixed;
                pointer-events: none;
                z-index: 9999;
                transition: transform 0.2s var(--ease-out-expo), opacity 0.3s ease;
                mix-blend-mode: normal;
                display: block;
                will-change: transform;
                transform: translate(-50%, -50%);
                box-shadow: 0 0 15px var(--gold-primary);
            }
            #custom-cursor::after {
                content: '';
                position: absolute;
                top: -12px; left: -12px;
                width: 36px; height: 36px;
                border: 1px solid var(--gold-muted);
                border-radius: 50%;
                transition: transform 0.3s var(--ease-out-expo);
            }
            .interactive:hover ~ #custom-cursor,
            .interactive:hover #custom-cursor {
                transform: translate(-50%, -50%) scale(0.5);
                opacity: 0.8;
            }
            .interactive:hover ~ #custom-cursor::after,
            .interactive:hover #custom-cursor::after {
                transform: scale(1.5);
                border-color: var(--gold-primary);
            }
        }

        @media (max-width: 1199px) {
            #custom-cursor { display: none; }
        }

        /* Typography Refinement */
        h1, h2, h3, .playfair {
            font-family: 'Playfair Display', serif;
            font-weight: 400;
            letter-spacing: -0.01em;
            word-wrap: break-word;
        }

        h1 { letter-spacing: 0.25em; }
        h2 { letter-spacing: 0.15em; text-transform: uppercase; }

        p { font-weight: 300; letter-spacing: 0.02em; font-size: 0.95rem; opacity: 0.9; }

        /* Scroll Progress - Luxury Gold Gradient */
        #scroll-progress {
            position: fixed;
            top: 0; left: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--gold-primary), var(--gold-bright));
            z-index: 2001;
            width: 0%;
            transition: width 0.15s linear;
        }

        /* Navigation - Glassmorphism & Elevation */
        nav {
            position: fixed;
            top: 0; width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 var(--container-padding);
            height: var(--nav-height);
            z-index: 1000;
            transition: var(--transition-smooth);
            background: transparent;
        }

        nav.scrolled {
            height: 90px;
            background: rgba(2, 6, 6, 0.85);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border-bottom: 1px solid var(--border-gold);
            box-shadow: var(--shadow-subtle);
        }

        @media (max-width: 768px) {
            nav.scrolled { height: 70px; }
        }

        .nav-logo-img {
            height: 60px;
            width: auto;
            transition: var(--transition-smooth);
            filter: drop-shadow(0 4px 10px rgba(0,0,0,0.4));
        }
        nav.scrolled .nav-logo-img { height: 48px; }
        @media (max-width: 768px) {
            .nav-logo-img { height: 45px; }
            nav.scrolled .nav-logo-img { height: 38px; }
        }

        .nav-links {
            display: flex;
            gap: 3.5rem;
            list-style: none;
            flex: 1;
            justify-content: center;
        }
        .nav-links a {
            text-decoration: none;
            color: var(--text-dim);
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 4px;
            transition: var(--transition-fast);
            position: relative;
            padding: 10px 0;
        }
        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0; left: 50%;
            width: 0%; height: 1px;
            background: var(--gold-primary);
            transition: var(--transition-fast);
            transform: translateX(-50%);
        }
        .nav-links a:hover { color: var(--gold-primary); }
        .nav-links a:hover::after { width: 40%; }

        .nav-actions { display: flex; align-items: center; gap: 2.5rem; }
        .social-icons-nav { display: flex; gap: 1.5rem; border-right: 1px solid var(--border-gold); padding-right: 2.5rem; }
        .social-link { color: var(--gold-muted); transition: var(--transition-fast); }
        .social-link:hover { color: var(--gold-primary); transform: translateY(-3px); }

        .cart-trigger {
            position: relative;
            transition: var(--transition-fast);
            padding: 10px;
            border-radius: 50%;
        }
        .cart-trigger:hover { background: rgba(203, 163, 92, 0.12); transform: scale(1.05); }
        #cart-count {
            position: absolute;
            top: 2px; right: 2px;
            background: var(--gold-primary);
            color: var(--bg-dark);
            font-size: 9px;
            font-weight: 800;
            width: 16px; height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--gold-primary);
            padding: 10px;
            transition: var(--transition-fast);
        }

        /* Hero - Cinematic Entrance */
        #hero {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            text-align: center;
            padding: 0 var(--container-padding);
            padding-top: 180px;
            padding-bottom: 60px;
        }

        @media (max-width: 768px) {
            #hero { padding-top: 120px; }
        }

        .hero-bg-text {
            position: absolute;
            top: 48%;
            left: 0;
            width: 100%;
            font-size: 28vw;
            font-family: 'Playfair Display';
            color: rgba(203, 163, 92, 0.025);
            white-space: nowrap;
            pointer-events: none;
            z-index: 0;
            will-change: transform;
            line-height: 0.8;
            letter-spacing: 0.1em;
            text-transform: uppercase;
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            width: 100%;
        }

        .hero-content img {
            opacity: 0;
            animation: revealSimple 1.5s var(--transition-smooth) forwards 0.3s;
        }

        #hero h1 {
            font-size: clamp(3rem, 12vw, 10rem);
            font-weight: 500;
            margin-bottom: 2rem;
            background: linear-gradient(180deg, #FFFFFF 10%, #cba35c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            opacity: 0;
            will-change: transform, opacity, filter, letter-spacing;
            /* Premium Sophisticated Reveal */
            animation: revealTitle 2.8s var(--ease-luxury) forwards 0.6s;
            max-width: 100%;
        }

        .hero-content p {
            opacity: 0;
            animation: revealSimple 1.8s var(--transition-smooth) forwards 1s;
            max-width: 100%;
            overflow-wrap: break-word;
        }

        .hero-content .btn-gold {
            opacity: 0;
            animation: revealSimple 1.5s var(--transition-smooth) forwards 1.4s;
        }

        @keyframes revealTitle {
            0% { 
                opacity: 0; 
                /* More subtle movement and scale for premium feel */
                transform: translateY(15px) scale(1.02); 
                filter: blur(12px);
                letter-spacing: 0.4em;
            }
            100% { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
                filter: blur(0);
                letter-spacing: 0.25em;
            }
        }

        @keyframes revealSimple {
            0% { opacity: 0; transform: translateY(15px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        /* Luxury Buttons */
        .btn-gold {
            background: transparent;
            border: 1px solid var(--gold-primary);
            color: var(--gold-primary);
            padding: 20px 48px;
            text-transform: uppercase;
            letter-spacing: 5px;
            font-size: 0.7rem;
            font-weight: 500;
            transition: var(--transition-smooth);
            border-radius: 1px;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        @media (max-width: 768px) {
            .btn-gold { padding: 18px 36px; letter-spacing: 3px; }
        }
        .btn-gold::before {
            content: '';
            position: absolute;
            top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: 0.6s;
            z-index: -1;
        }
        .btn-gold:hover { color: var(--bg-dark); background: var(--gold-primary); border-color: var(--gold-primary); letter-spacing: 6px; }
        .btn-gold:hover::before { left: 100%; }

        /* Product Library */
        #shop { padding: 120px var(--container-padding); background: var(--bg-accent); position: relative; }
        #shop::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 200px;
            background: linear-gradient(180deg, var(--bg-dark) 0%, transparent 100%);
        }
        .product-grid { display: grid; gap: 50px; }

        @media (min-width: 1400px) { .product-grid { grid-template-columns: repeat(4, 1fr); } }
        @media (min-width: 1024px) and (max-width: 1399px) { .product-grid { grid-template-columns: repeat(3, 1fr); } }
        @media (min-width: 768px) and (max-width: 1023px) { .product-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 767px) { .product-grid { grid-template-columns: 1fr; gap: 40px; } }

        .product-card {
            background: rgba(255,255,255,0.015);
            border: 1px solid var(--border-gold);
            padding: 30px;
            transition: 
                transform 0.8s var(--ease-luxury), 
                border-color 0.8s var(--ease-luxury), 
                box-shadow 0.8s var(--ease-luxury), 
                background 0.8s var(--ease-luxury);
            display: flex;
            flex-direction: column;
            border-radius: 2px;
            position: relative;
            overflow: hidden;
            will-change: transform, box-shadow, border-color;
            /* Defined timeline for scroll parallax */
            view-timeline: --card-view block;
        }
        
        .product-card:hover {
            transform: translateY(-12px);
            background: rgba(255,255,255,0.035);
            border-color: var(--gold-primary);
            box-shadow: 0 20px 50px rgba(0,0,0,0.7), 0 0 25px rgba(203, 163, 92, 0.4);
        }

        .image-container {
            aspect-ratio: 1/1;
            overflow: hidden;
            background: radial-gradient(circle, rgba(203,163,92,0.08) 0%, rgba(0,0,0,0.1) 100%);
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(255,255,255,0.03);
            transition: background 0.5s ease;
        }
        
        .image-container img {
            width: 80%; height: 80%;
            object-fit: contain;
            /* Core requested transition for transform zoom */
            transition: transform 0.8s var(--ease-luxury), opacity 0.5s ease;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5));
            will-change: transform;
            /* Subtle Scroll Parallax Animation */
            animation: luxuryParallax linear both;
            animation-timeline: --card-view;
            animation-range: entry 0% exit 100%;
        }
        
        @keyframes luxuryParallax {
            0% { transform: translateY(-10px); }
            100% { transform: translateY(10px); }
        }

        /* Subtle scale(1.1) zoom on image when parent card is hovered as requested */
        .product-card:hover .image-container img { 
            transform: scale(1.1) translateY(0);
        }

        /* Fluid Grids for Sections */
        .about-grid, .contact-grid, .checkout-grid {
            display: grid;
            gap: 100px;
            align-items: start;
        }
        @media (max-width: 1024px) {
            .about-grid, .contact-grid, .checkout-grid { gap: 60px; grid-template-columns: 1fr !important; }
        }

        /* Detail View Upgrade */
        #details-view { background: var(--bg-dark); }
        /* Target injected detail structure */
        #details-content > div {
            display: grid !important;
            grid-template-columns: 1fr 1fr;
            gap: 100px;
            align-items: center;
        }
        @media (max-width: 1024px) {
            #details-content > div { grid-template-columns: 1fr !important; gap: 50px !important; }
            #details-view { padding-top: 140px !important; }
        }

        .size-btn {
            padding: 14px 28px;
            border: 1px solid var(--border-gold);
            background: transparent;
            color: var(--text-dim);
            font-size: 0.75rem;
            letter-spacing: 3px;
            text-transform: uppercase;
            transition: var(--transition-fast);
            flex: 1;
            border-radius: 1px;
        }
        @media (max-width: 480px) {
            .size-btn { padding: 12px 15px; font-size: 0.65rem; letter-spacing: 1px; }
        }
        .size-btn.active { background: var(--gold-primary); color: var(--bg-dark); font-weight: 700; border-color: var(--gold-primary); transform: scale(1.02); }
        .size-btn:hover:not(.active) { border-color: var(--gold-primary); color: var(--gold-primary); background: rgba(203, 163, 92, 0.05); }

        /* Forms & Inputs */
        .checkout-panel {
            background: rgba(255,255,255,0.02);
            border: 1px solid var(--border-gold);
            padding: 50px;
            border-radius: 2px;
            box-shadow: var(--shadow-subtle);
        }
        @media (max-width: 768px) {
            .checkout-panel { padding: 30px 20px; }
        }
        .input, textarea, select {
            background: rgba(255,255,255,0.02);
            border: 1px solid var(--border-white);
            color: var(--text-white);
            padding: 18px;
            font-size: 0.9rem;
            transition: var(--transition-fast);
            border-radius: 1px;
            width: 100%;
        }
        /* Refined Premium Focus State */
        .input:focus, textarea:focus, select:focus { 
            border-color: var(--gold-bright); 
            background: rgba(203, 163, 92, 0.08); 
            /* Multi-layered shadow for high-end depth and a tactile lift effect */
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.6), 
                0 0 0 1px var(--gold-bright), 
                0 0 20px rgba(203, 163, 92, 0.15); 
            transform: translateY(-3px);
            outline: none;
        }

        /* Cart & Menu Overlays - Sophisticated Motion */
        #cart-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(0px);
            -webkit-backdrop-filter: blur(0px);
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.8s var(--ease-out-expo), backdrop-filter 0.8s var(--ease-out-expo), visibility 0.8s;
        }
        #cart-overlay.open { 
            opacity: 1; 
            visibility: visible; 
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }
        
        .cart-drawer {
            position: fixed;
            top: 0; right: -650px;
            width: 100%; max-width: 520px;
            height: 100%;
            background: var(--bg-dark);
            border-left: 1px solid var(--border-gold);
            padding: 60px;
            transition: right 0.8s var(--ease-out-expo);
            display: flex; flex-direction: column;
            box-shadow: -20px 0 60px rgba(0,0,0,0.8);
            z-index: 2001;
        }
        /* Sophisticated Internal Materialization */
        .cart-drawer > * {
            opacity: 0;
            transform: translateX(40px);
            transition: opacity 1s var(--ease-out-expo) 0.1s, transform 1s var(--ease-out-expo) 0.1s;
        }
        #cart-overlay.open .cart-drawer { right: 0; }
        #cart-overlay.open .cart-drawer > * { opacity: 1; transform: translateX(0); }

        /* Cart Item Specific Animation - Slide-in from the right with fade-in */
        .cart-item {
            animation: cartItemAppear 0.8s var(--ease-out-expo) both;
            will-change: transform, opacity;
        }
        @keyframes cartItemAppear {
            0% { 
                opacity: 0; 
                transform: translateX(30px); 
            }
            100% { 
                opacity: 1; 
                transform: translateX(0); 
            }
        }

        @media (max-width: 767px) {
            .cart-drawer {
                top: auto; bottom: -100%; right: 0;
                height: 90vh; max-width: 100%;
                border-left: none; border-top: 1px solid var(--border-gold);
                transition: bottom 0.8s var(--ease-out-expo);
                padding: 40px 20px;
            }
            #cart-overlay.open .cart-drawer { bottom: 0; right: 0; }
            .cart-drawer > * { transform: translateY(40px) translateX(0); }
            #cart-overlay.open .cart-drawer > * { transform: translateY(0); }
        }

        /* Mobile Menu Refined Animation - Scale & Fade Reveal */
        #mobile-menu {
            position: fixed; inset: 0; background: var(--bg-dark); z-index: 1001;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            gap: 3rem; 
            transform: scale(0.92); 
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transition: transform 0.8s var(--ease-out-expo), opacity 0.8s var(--ease-out-expo), visibility 0.8s;
            padding: 0 20px;
        }
        #mobile-menu.active { 
            transform: scale(1); 
            opacity: 1; 
            visibility: visible;
            pointer-events: auto;
        }
        
        /* Refined entrance for each mobile-link */
        .mobile-link { 
            font-family: 'Playfair Display'; font-size: clamp(2rem, 8vw, 2.8rem); color: var(--gold-primary); 
            letter-spacing: 5px; text-decoration: none; 
            text-align: center;
            will-change: transform, opacity, filter;
            opacity: 0;
            /* Precise refined lift and pronounced fade timing as requested */
            transform: translateY(20px);
            transition: 
                opacity 0.8s var(--ease-out-expo), 
                transform 0.8s var(--ease-out-expo);
            /* Sequential transition-delay logic based on index */
            transition-delay: calc(0.1s + (0.08s * var(--i))); 
        }
        
        #mobile-menu.active .mobile-link { 
            opacity: 1; 
            transform: translateY(0); 
        }

        /* Micro-interactions (Floaters) */
        #back-to-top, #whatsapp-float {
            position: fixed;
            right: 40px;
            width: 60px; height: 60px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            z-index: 100;
            transition: var(--transition-smooth);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-gold);
            cursor: pointer;
        }
        @media (max-width: 768px) {
            #back-to-top, #whatsapp-float { right: 20px; width: 50px; height: 50px; }
            #whatsapp-float { bottom: 90px; }
            #back-to-top { bottom: 25px; }
        }
        #back-to-top { bottom: 40px; background: rgba(203, 163, 92, 0.1); color: var(--gold-primary); opacity: 0; visibility: hidden; }
        #back-to-top.visible { opacity: 1; visibility: visible; }
        #whatsapp-float { bottom: 120px; background: rgba(37, 211, 102, 0.1); border-color: rgba(37, 211, 102, 0.2); color: #25D366; }
        
        #back-to-top:hover { transform: translateY(-10px); background: var(--gold-primary); color: var(--bg-dark); border-color: var(--gold-primary); }
        #whatsapp-float:hover { transform: translateY(-10px); background: #25D366; color: white; border-color: #25D366; }

        /* Quantity UI - Tactical Feel */
        .qty-controls { display: flex; align-items: center; gap: 20px; background: rgba(255,255,255,0.03); padding: 8px 20px; border-radius: 1px; border: 1px solid var(--border-white); }
        .qty-btn { background: none; border: none; color: var(--gold-primary); cursor: pointer; display: flex; align-items: center; padding: 5px; transition: var(--transition-fast); }
        .qty-btn:hover { color: var(--text-white); transform: scale(1.3); }

        /* Filter Buttons */
        .filter-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 60px;
            flex-wrap: wrap;
        }
        .filter-btn {
            background: transparent;
            border: 1px solid var(--border-gold);
            color: var(--text-dim);
            padding: 12px 24px;
            text-transform: uppercase;
            letter-spacing: 3px;
            font-size: 0.7rem;
            cursor: pointer;
            transition: var(--transition-fast);
            border-radius: 1px;
        }
        .filter-btn:hover {
            border-color: var(--gold-primary);
            color: var(--gold-primary);
        }
        .filter-btn.active {
            background: var(--gold-primary);
            color: var(--bg-dark);
            border-color: var(--gold-primary);
            font-weight: 600;
        }

        /* Accessibility */
        :focus-visible { outline: 2px solid var(--gold-primary); outline-offset: 4px; }
        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }

        /* Mob Menu Refinement */
        @media (max-width: 1024px) {
            nav { padding: 0 var(--container-padding); }
            .nav-links, .social-icons-nav { display: none; }
            .menu-toggle { display: block; }
        }

    </style>
<link rel="stylesheet" href="/index.css">
</head>
<body>

    <a class="sr-only" href="#main-view">Skip to main content</a>

    <div id="custom-cursor" aria-hidden="true"></div>
    <div id="scroll-progress" role="progressbar" aria-hidden="true"></div>

    <div id="sr-announces" class="sr-only" aria-live="polite" aria-atomic="true"></div>
    
    <div id="mobile-menu" aria-hidden="true">
        <button onclick="toggleMobileMenu()" aria-label="Close menu" style="position:absolute; top:30px; right:30px; background:none; border:none; color:var(--gold-primary);"><i data-lucide="x" size="36"></i></button>
        <a href="javascript:void(0)" style="--i:1" class="mobile-link interactive" onclick="handleNavClick('hero'); toggleMobileMenu();">The Scent</a>
        <a href="javascript:void(0)" style="--i:2" class="mobile-link interactive" onclick="handleNavClick('shop'); toggleMobileMenu();">Collection</a>
        <a href="javascript:void(0)" style="--i:3" class="mobile-link interactive" onclick="handleNavClick('about'); toggleMobileMenu();">Heritage</a>
        <a href="javascript:void(0)" style="--i:4" class="mobile-link interactive" onclick="handleNavClick('contact'); toggleMobileMenu();">Contact</a>
        <div style="display:flex; gap: 40px; margin-top: 60px;">
            <a href="https://www.facebook.com/people/Luban-Fragrance/61586484638332/" target="_blank" rel="noopener noreferrer" style="color:var(--gold-primary);" class="interactive" aria-label="Facebook"><i data-lucide="facebook" size="32"></i></a>
            <a href="https://www.instagram.com/lubanfragrance" target="_blank" rel="noopener noreferrer" style="color:var(--gold-primary);" class="interactive" aria-label="Instagram"><i data-lucide="instagram" size="32"></i></a>
        </div>
    </div>

    <div id="back-to-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})" role="button" aria-label="Back to top" class="interactive"><i data-lucide="arrow-up" size="24"></i></div>
    <a id="whatsapp-float" href="https://wa.me/8801935322213?text=Hello%2C%20I'm%20interested%20in%20Luban%20Fragrance!" target="_blank" rel="noopener noreferrer" aria-label="Whatsapp contact" class="interactive">
        <i data-lucide="message-circle" size="24"></i>
    </a>

    <nav id="navbar">
        <div onclick="showView('main')" class="nav-logo-container interactive" style="cursor:pointer" role="button" aria-label="Go to homepage">
            <img src="https://i.ibb.co.com/Vcq9NZsL/Logo.png" alt="Luban Logo" class="nav-logo-img">
        </div>
        
        <ul class="nav-links">
            <li><a href="javascript:void(0)" onclick="handleNavClick('hero')" class="interactive">The Scent</a></li>
            <li><a href="javascript:void(0)" onclick="handleNavClick('shop')" class="interactive">Collection</a></li>
            <li><a href="javascript:void(0)" onclick="handleNavClick('about')" class="interactive">Heritage</a></li>
            <li><a href="javascript:void(0)" onclick="handleNavClick('contact')" class="interactive">Contact</a></li>
        </ul>

        <div class="nav-actions">
            <div class="social-icons-nav">
                <a href="https://www.facebook.com/people/Luban-Fragrance/61586484638332/" target="_blank" rel="noopener noreferrer" class="social-link interactive" aria-label="Facebook"><i data-lucide="facebook" size="18"></i></a>
                <a href="https://www.instagram.com/lubanfragrance" target="_blank" rel="noopener noreferrer" class="social-link interactive" aria-label="Instagram"><i data-lucide="instagram" size="18"></i></a>
            </div>
            <div class="cart-trigger interactive" onclick="toggleCart(true)" role="button" aria-label="Open cart">
                <i data-lucide="shopping-bag" stroke="#cba35c" size="22"></i>
                <span id="cart-count">0</span>
            </div>
            <button class="menu-toggle interactive" onclick="toggleMobileMenu()" aria-label="Open Menu"><i data-lucide="menu" size="32"></i></button>
        </div>
    </nav>

    <div id="main-view">
        <section id="hero">
            <div class="hero-bg-text" aria-hidden="true">LUBAN</div>
            <div class="hero-content">
                <img src="https://i.ibb.co.com/Vcq9NZsL/Logo.png" alt="Luban Emblem" style="width: 100px; margin-bottom: 3.5rem; opacity: 0.9; filter: drop-shadow(0 4px 15px rgba(203,163,92,0.2));">
                <h1>LUBAN</h1>
                <p style="letter-spacing: 15px; color: var(--gold-muted); text-transform: uppercase; font-size: 0.8rem; margin-bottom: 4.5rem; font-weight: 500;">Refined Quality In Every Drop</p>
                <button class="btn-gold interactive" onclick="document.getElementById('shop').scrollIntoView({behavior: 'smooth'})">Explore Collection</button>
            </div>
        </section>

        <section id="shop">
            <div style="text-align: center; margin-bottom: 80px;">
                <h2 style="font-size: clamp(2rem, 5vw, 4.5rem); margin-bottom: 15px; color: var(--gold-primary); letter-spacing: 12px;">The Library</h2>
                <div style="width: 60px; height: 1px; background: var(--gold-primary); margin: 0 auto 15px;"></div>
                <p style="color: var(--text-dim); letter-spacing: 5px; text-transform: uppercase; font-size: 0.7rem;">Selected Olfactory Masterpieces</p>
            </div>
            
            <div class="filter-container">
                <button class="filter-btn active interactive" data-filter="All" onclick="setFilter('All')">All</button>
                <button class="filter-btn interactive" data-filter="Masculine" onclick="setFilter('Masculine')">Masculine</button>
                <button class="filter-btn interactive" data-filter="Feminine" onclick="setFilter('Feminine')">Feminine</button>
                <button class="filter-btn interactive" data-filter="Unisex" onclick="setFilter('Unisex')">Unisex</button>
            </div>

            <div class="product-grid" id="product-list"></div>
        </section>

        <section id="about" style="padding: 120px var(--container-padding); background: var(--bg-dark); border-top: 1px solid var(--border-gold);">
            <div class="about-grid" style="grid-template-columns: 1fr 1.2fr;">
                <div style="position: relative;">
                    <div style="border: 1px solid var(--border-gold); padding: 100px; background: rgba(255,255,255,0.01); display: flex; justify-content: center; border-radius: 2px; position:relative;">
                        <img src="https://i.ibb.co.com/Vcq9NZsL/Logo.png" alt="Luban Logo Watermark" style="width: 70%; opacity: 0.12; filter: grayscale(1);">
                        <div style="position:absolute; bottom: -20px; right: -20px; width: 100px; height: 100px; border: 1px solid var(--gold-muted); opacity:0.3;"></div>
                    </div>
                </div>
                <div>
                    <h2 style="font-size: clamp(2rem, 6vw, 4.5rem); color: var(--gold-primary); margin-bottom: 30px; letter-spacing: 5px;">Our Heritage</h2>
                    <p style="color: var(--text-dim); line-height: 2; font-size: clamp(1rem, 2vw, 1.15rem); margin-bottom: 30px; font-family: 'Playfair Display'; font-style: italic;">"A fragrance is a silent biography, an invisible yet unforgettable signature."</p>
                    <p style="color: var(--text-dim); line-height: 1.8; font-size: 1.05rem; margin-bottom: 30px;">Born from a passion for the ancestral art of scent, Luban Fragrance represents the pinnacle of olfactory craftsmanship. We believe that true luxury lies in restraint and purity.</p>
                    <p style="color:var(--text-dim); line-height: 1.8; font-size: 1.05rem;">By bypassing the excessive marketing overhead of traditional luxury houses, we invest solely in the soul of the perfume. Each drop tells a story of unparalleled quality, carefully curated from the finest sources globally.</p>
                </div>
            </div>
        </section>

        <section id="contact" style="padding: 120px var(--container-padding); background: var(--bg-accent);">
            <div class="contact-grid" style="grid-template-columns: 1fr 1fr;">
                <div>
                    <h2 style="font-size: clamp(2rem, 6vw, 4.5rem); color: var(--gold-primary); margin-bottom: 40px; letter-spacing: 5px;">Inquiry</h2>
                    <p style="color: var(--text-dim); margin-bottom: 50px; line-height: 2; font-size: 1.1rem; max-width: 90%;">Should you require guidance in selecting your signature essence or have queries regarding our library, our experts await your message.</p>
                    
                    <div style="display:flex; flex-direction:column; gap:40px;">
                        <div style="display:flex; align-items:center; gap:25px;">
                            <div style="width:60px; height:60px; border:1px solid var(--border-gold); display:flex; align-items:center; justify-content:center; color:var(--gold-primary); border-radius:50%; background: rgba(203, 163, 92, 0.05); flex-shrink:0;"><i data-lucide="map-pin" size="24"></i></div>
                            <div><p style="text-transform:uppercase; font-size:0.6rem; color:var(--gold-muted); letter-spacing:3px; margin-bottom:5px;">Studio</p><p style="font-size:1rem; font-weight:400;">Dhaka, Bangladesh</p></div>
                        </div>
                        <div style="display:flex; align-items:center; gap:25px;">
                            <div style="width:60px; height:60px; border:1px solid var(--border-gold); display:flex; align-items:center; justify-content:center; color:var(--gold-primary); border-radius:50%; background: rgba(203, 163, 92, 0.05); flex-shrink:0;"><i data-lucide="mail" size="24"></i></div>
                            <div><p style="text-transform:uppercase; font-size:0.6rem; color:var(--gold-muted); letter-spacing:3px; margin-bottom:5px;">Electronic Correspondence</p><p style="font-size:1rem; font-weight:400; word-break: break-all;">lubanfragrance@gmail.com</p></div>
                        </div>
                    </div>
                </div>
                
                <div class="checkout-panel">
                    <h3 class="playfair" style="font-size: 1.8rem; margin-bottom: 30px; color: var(--gold-primary);">Private Message</h3>
                    <form onsubmit="event.preventDefault();" style="display: flex; flex-direction: column; gap: 20px;">
                        <input type="text" placeholder="Full Identity" class="input interactive" style="border-bottom: 1px solid var(--border-gold); background:transparent;" aria-label="Name" required>
                        <input type="email" placeholder="Electronic Mail" class="input interactive" style="border-bottom: 1px solid var(--border-gold); background:transparent;" aria-label="Email" required>
                        <textarea placeholder="Your message..." rows="4" class="input interactive" style="border-bottom: 1px solid var(--border-gold); background:transparent; resize: none;" aria-label="Message"></textarea>
                        <button type="submit" class="btn-gold interactive" style="width:100%; margin-top:20px;">Transmit Request</button>
                    </form>
                </div>
            </div>
        </section>
    </div>

    <div id="details-view" style="display: none; min-height: 100vh; padding: 200px var(--container-padding) 120px;">
        <div id="details-content"></div>
    </div>

    <section id="checkout-view" style="display:none; padding: 200px var(--container-padding) 120px;">
        <div style="max-width:1400px; margin:0 auto;">
            <div style="display:flex; flex-wrap:wrap; justify-content:space-between; align-items:flex-end; margin-bottom:60px; border-bottom: 1px solid var(--border-gold); padding-bottom: 20px; gap: 20px;">
                <a href="javascript:void(0)" onclick="showView('main')" style="color:var(--gold-primary); font-size:0.75rem; text-transform:uppercase; letter-spacing:4px; display:inline-flex; align-items:center; gap:15px; text-decoration:none;" class="interactive"><i data-lucide="arrow-left" size="18"></i> Back to Collection</a>
                <h2 style="letter-spacing:6px; font-size: clamp(1.8rem, 4vw, 3rem); text-transform: uppercase;">Checkout</h2>
            </div>

            <div class="checkout-grid" style="grid-template-columns: 450px 1fr;">
                <aside>
                    <div class="checkout-panel" style="position:sticky; top:110px; border-color: var(--gold-primary);">
                        <h3 style="margin-bottom:30px; font-size: 1.4rem; text-transform: uppercase; letter-spacing: 3px; color: var(--gold-primary);">The Selection</h3>
                        <div id="checkout-items" style="max-height:450px; overflow-y:auto; margin-bottom:30px; padding-right: 15px;"></div>

                        <div style="border-top:1px solid var(--border-gold); padding-top:25px; display: flex; flex-direction: column; gap: 15px;">
                            <div style="display:flex; justify-content:space-between; color:var(--text-dim); font-size:0.85rem; letter-spacing:1px;"><span>Subtotal</span><span id="checkout-subtotal">0৳</span></div>
                            <div style="display:flex; justify-content:space-between; color:var(--text-dim); font-size:0.85rem; letter-spacing:1px;"><span>Shipping</span><span id="checkout-shipping">0৳</span></div>
                            <div style="display:flex; justify-content:space-between; font-weight:700; color:var(--gold-primary); font-size:1.8rem; border-top: 1px solid var(--border-white); padding-top: 20px; letter-spacing:1px;"><span>Grand Total</span><span id="checkout-total">0৳</span></div>
                        </div>
                    </div>
                </aside>

                <div class="checkout-panel" id="checkout-panel">
                    <form id="checkout-form" onsubmit="event.preventDefault(); placeOrder();" style="display: flex; flex-direction: column; gap: 30px;">
                        <div>
                            <label style="font-size:0.6rem; color:var(--gold-muted); text-transform:uppercase; letter-spacing:3px; display:block; margin-bottom: 12px;">Legal Full Identity *</label>
                            <input id="billing-name" class="input interactive" type="text" placeholder="As it appears on documentation" required>
                        </div>

                        <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 25px;">
                            <div>
                                <label style="font-size:0.6rem; color:var(--gold-muted); text-transform:uppercase; letter-spacing:3px; display:block; margin-bottom: 12px;">Contact Number *</label>
                                <input id="billing-phone" class="input interactive" type="tel" placeholder="01XXXXXXXXX" required>
                            </div>
                            <div>
                                <label style="font-size:0.6rem; color:var(--gold-muted); text-transform:uppercase; letter-spacing:3px; display:block; margin-bottom: 12px;">Electronic Mail *</label>
                                <input id="billing-email" class="input interactive" type="email" placeholder="your@email.com" required>
                            </div>
                        </div>

                        <div>
                            <label style="font-size:0.6rem; color:var(--gold-muted); text-transform:uppercase; letter-spacing:3px; display:block; margin-bottom: 12px;">City / Region *</label>
                            <select id="billing-city" class="input interactive" required>
                                <option value="">Select Location</option>
                                <option value="Dhaka">Dhaka</option>
                                <option value="Chattogram">Chattogram</option>
                                <option value="Sylhet">Sylhet</option>
                                <option value="Rajshahi">Rajshahi</option>
                                <option value="Khulna">Khulna</option>
                                <option value="Barishal">Barishal</option>
                                <option value="Rangpur">Rangpur</option>
                                <option value="Mymensingh">Mymensingh</option>
                            </select>
                        </div>

                        <div>
                            <label style="font-size:0.6rem; color:var(--gold-muted); text-transform:uppercase; letter-spacing:3px; display:block; margin-bottom: 12px;">Residency Details *</label>
                            <input id="billing-address" class="input interactive" type="text" placeholder="Avenue, House, Apartment..." required>
                        </div>

                        <div style="display:flex; gap:15px; align-items:center; background: rgba(255,255,255,0.03); padding: 20px; border: 1px solid var(--border-gold); border-radius: 1px;">
                            <input id="cod-checkbox" type="checkbox" checked style="width:20px; height:20px; accent-color: var(--gold-primary);" class="interactive">
                            <label for="cod-checkbox" style="font-size:0.85rem; font-weight:300;">Complimentary Cash on Delivery service active.</label>
                        </div>

                        <button type="submit" class="btn-gold interactive" style="width:100%; padding: 22px; font-weight:700;">Complete Procurement</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <div id="cart-overlay" onclick="toggleCart(false)">
        <div class="cart-drawer" onclick="event.stopPropagation()">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:50px;">
                <h2 class="playfair" style="font-size: 1.8rem; letter-spacing: 3px;">Selection</h2>
                <button id="cart-close-btn" onclick="toggleCart(false)" style="background:none; border:none; color:var(--text-dim); cursor:pointer;" class="interactive"><i data-lucide="x" size="32"></i></button>
            </div>
            <div id="cart-items" style="flex: 1; overflow-y: auto; margin-bottom: 40px; padding-right: 15px;"></div>
            <div style="border-top: 1px solid var(--border-gold); padding-top: 30px;">
                <div style="display:flex; justify-content:space-between; margin-bottom: 30px;">
                    <span style="text-transform:uppercase; letter-spacing:4px; font-size:0.8rem; color:var(--text-dim);">Total</span>
                    <span id="cart-total" style="font-size:1.8rem; color:var(--gold-primary); font-weight: 700; letter-spacing:1px;">0৳</span>
                </div>
                <button onclick="checkout()" class="btn-gold interactive" style="width:100%; padding: 22px; font-weight:700;">Proceed to Procurement</button>
            </div>
        </div>
    </div>

    <footer style="padding: 100px var(--container-padding); text-align:center; border-top:1px solid var(--border-gold); background: var(--bg-dark);">
        <img src="https://i.ibb.co.com/Vcq9NZsL/Logo.png" alt="Luban Logo Footer" style="width: 70px; margin-bottom: 2.5rem; opacity: 0.3; filter: grayscale(1);">
        <div style="display:flex; justify-content:center; gap:25px; margin-bottom: 35px;">
            <a href="https://www.facebook.com/people/Luban-Fragrance/61586484638332/" target="_blank" rel="noopener noreferrer" style="color:var(--gold-muted);" class="interactive"><i data-lucide="facebook" size="18"></i></a>
            <a href="https://www.instagram.com/lubanfragrance" target="_blank" rel="noopener noreferrer" style="color:var(--gold-muted);" class="interactive"><i data-lucide="instagram" size="18"></i></a>
        </div>
        <p style="font-size: 0.65rem; letter-spacing: 4px; color: var(--gold-muted); text-transform: uppercase;">&copy; 2026 Luban Fragrance. All Rights Reserved.</p>
    </footer>

    <script>
        if (window.lucide) window.addEventListener('load', () => lucide.createIcons());

        const PRICE_3ML_BDT = 200;
        const PRICE_6ML_BDT = 300;
        const APPS_SCRIPT_EXEC_URL = "https://script.google.com/macros/s/AKfycbx-2IooPMPFvx02eF5inEmrQ4G2LKT8HoE0ZjifrJIILT0flmSLHxetFN1vDsFVON31Ig/exec";

        const products = [ { "id": 1, "name": "Ehsas Al Arabia", "price3ml": 200.0, "price6ml": 300.0, "desc": "Oud, Rose, and Amber", "vibe": "Exotic, luxurious, and deeply Middle Eastern.", "img": "https://i.ibb.co.com/qYg6CR3M/ehsas-al-arabia.png", "category": "Oriental", "gender": "Unisex" }, { "id": 2, "name": "Vampire Blood", "price3ml": 200.0, "price6ml": 300.0, "desc": "Red Berries, Jasmine, and Plum", "vibe": "Dark, sweet, and gothic.", "img": "https://i.ibb.co/VpWmC5gv/Red-and-Black-Modern-Black-Friday-Luxury-Fragrance-Perfume-Sale-Instagram-Post.png", "category": "Sweet", "gender": "Unisex" }, { "id": 3, "name": "Creed Aventus", "price3ml": 200.0, "price6ml": 300.0, "desc": "Pineapple, Birch, and Musk", "vibe": "Smoky, fruity, sophisticated.", "img": "https://i.ibb.co/dwwbGFFL/Creed-Aventus.png", "category": "Masculine", "gender": "Masculine" }, { "id": 4, "name": "Baccarat Rouge 540", "price3ml": 200.0, "price6ml": 300.0, "desc": "Saffron, Jasmine, and Amberwood", "vibe": "Airy, burnt-sugar sweetness.", "img": "https://i.ibb.co/5zdJRRc/Baccarat-Rouge-540.png", "category": "Luxury", "gender": "Unisex" }, { "id": 5, "name": "Lattafa Khamrah", "price3ml": 200.0, "price6ml": 300.0, "desc": "Cinnamon, Dates, and Praline", "vibe": "Warm, boozy, and decadently sweet gourmand.", "img": "https://i.ibb.co.com/rfkGptqY/lubanfragrance.png", "category": "Gourmand", "gender": "Unisex" }, { "id": 6, "name": "Lattafa Yara", "price3ml": 200.0, "price6ml": 300.0, "desc": "Heliotrope, Orchid, and Tropical Fruits", "vibe": "Creamy, powdery, and strawberry-marshmallow sweetness.", "img": "https://i.ibb.co.com/HD9xRYg4/Yara.png", "category": "Feminine", "gender": "Feminine" }, { "id": 7, "name": "Stronger With You", "price3ml": 200.0, "price6ml": 300.0, "desc": "Chestnut, Cardamom, and Vanilla", "vibe": "Warm, sweet, and cozy—the ultimate date night scent.", "img": "https://i.ibb.co.com/992Qgj3v/Stronger-With-You-canva.png", "category": "Date Night", "gender": "Masculine" }, { "id": 8, "name": "Ariana Grande Cloud", "price3ml": 200.0, "price6ml": 300.0, "desc": "Lavender, Pear, Bergamot, and Whipped Cream", "vibe": "Dreamy, fluffy, and sweet—like a cozy vanilla cloud.", "img": "https://i.ibb.co/tpr16NRQ/Ariana-Grande-Cloud.jpg", "category": "Female", "gender": "Feminine" }, { "id": 10, "name": "YSL Black Opium", "price3ml": 200.0, "price6ml": 300.0, "desc": "Coffee, Vanilla, and White Flowers", "vibe": "Addictive, energizing, and sensual.", "img": "https://i.ibb.co.com/TDz28qGd/Balck-Opium.jpg", "category": "Feminine", "gender": "Feminine" }, { "id": 11, "name": "Good Girl", "price3ml": 200.0, "price6ml": 300.0, "desc": "Tuberose, Jasmine, and Roasted Tonka Bean", "vibe": "A powerful contrast of light and dark florals.", "img": "https://i.ibb.co.com/Fqdtg7jd/Good-Girl.jpg", "category": "Feminine", "gender": "Feminine" }, {
"id": 13,
"name": "Versace Eros",
"price3ml": 200.0,
"price6ml": 300.0,
"desc": "Mint, Candy Apple, and Vanilla",
"vibe": "Loud, sweet, and perfect for a vibrant night out.",
"img": "https://i.ibb.co/Xfzz4vHW/Eros-canva.png",
"category": "Date Night",
"gender": "Masculine"
}, { "id": 15, "name": "Hawas Fire", "price3ml": 200.0, "price6ml": 300.0, "desc": "Pepper, Nutmeg, and Intense Musk", "vibe": "A spicy, fiery evolution of the Hawas DNA.", "img": "https://i.ibb.co.com/V0cfjRpv/Fire.jpg", "category": "Masculine", "gender": "Masculine" }, { "id": 14, "name": "Hawas Ice", "price3ml": 200.0, "price6ml": 300.0, "desc": "Frozen Apple, Bergamot, and Mint", "vibe": "Louder, fresher, and colder than the original DNA.", "img": "https://i.ibb.co.com/RkC0QbCT/Ice.jpg", "category": "Masculine", "gender": "Masculine" }, { "id": 17, "name": "Tobacco Vanille", "price3ml": 200.0, "price6ml": 300.0, "desc": "Tobacco Leaf, Spices, and Creamy Vanilla", "vibe": "Rich, opulent, and smells like a private luxury lounge.", "img": "https://i.ibb.co/XfHdmS75/Tobacco-Vanille-canva.png", "category": "Luxury", "gender": "Unisex" }, { "id": 19, "name": "Miss Dior", "price3ml": 200.0, "price6ml": 300.0, "desc": "Iris, Peony, and Lily-of-the-Valley", "vibe": "Elegant, floral, and romantic.", "img": "https://i.ibb.co.com/C5TwSXbL/Miss.jpg", "category": "Feminine", "gender": "Feminine" }, { "id": 20, "name": "Lady Million", "price3ml": 200.0, "price6ml": 300.0, "desc": "Raspberry, Neroli, and Arabian Jasmine", "vibe": "Vibrant, glamorous, and honey-sweet.", "img": "https://i.ibb.co.com/2YvBKMXH/Lady.jpg", "category": "Feminine", "gender": "Feminine" }, { "id": 21, "name": "Bombshell", "price3ml": 200.0, "price6ml": 300.0, "desc": "Passionfruit, Peony, and Orchid", "vibe": "Bright, fruity, and unapologetically feminine.", "img": "https://i.ibb.co.com/BpCXdrB/Bomb.jpg", "category": "Feminine", "gender": "Feminine" }, { "id": 22, "name": "Acqua Di Gio", "price3ml": 200.0, "price6ml": 300.0, "desc": "Sea Notes, Lime, and Jasmine", "vibe": "The gold standard for aquatics—clean, light, and airy.", "img": "https://i.ibb.co.com/Gf613zdJ/Acqua-canva.png", "category": "Fresh", "gender": "Masculine" }, { "id": 23, "name": "Cool Water Man", "price3ml": 200.0, "price6ml": 300.0, "desc": "Sea Water, Mint, and Lavender", "vibe": "Fresh, aquatic blue classic.", "img": "https://i.ibb.co.com/6RrtfJzJ/Blue-and-White-Modern-Premium-Fragrance-Instagram-Story.jpg", "category": "Classic", "gender": "Unisex" }, { "id": 27, "name": "Sultan", "price3ml": 200.0, "price6ml": 300.0, "desc": "Cedar, Juniper, and Musk", "vibe": "Concentrated woodiness—very masculine and robust.", "img": "https://i.ibb.co.com/1fFTxNF9/sultan.png", "category": "Oriental", "gender": "Unisex" }, { "id": 28, "name": "Paris Hilton (Men)", "price3ml": 200.0, "price6ml": 300.0, "desc": "Cucumber and Mango Profile", "vibe": "A fruity, fresh profile that is casual and easy-going.", "img": "https://i.ibb.co.com/DDspXc3t/Paris-Hilton-Men.png", "category": "Fresh", "gender": "Unisex" } ];

        const CART_STORAGE_KEY = 'luban_cart_v1';
        let cart = [];
        let selectedSize = '3ml';
        let currentFilter = 'All';

        function saveCartToStorage() { localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cart)); }
        function loadCartFromStorage() { const raw = localStorage.getItem(CART_STORAGE_KEY); if (raw) cart = JSON.parse(raw); }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('active');
            if (menu.classList.contains('active')) document.body.classList.add('no-cursor');
            else document.body.classList.remove('no-cursor');
        }

        function handleNavClick(id) {
            showView('main');
            setTimeout(() => {
                const el = document.getElementById(id);
                if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
        }

        /* Generic Error Handling for Images to ensure luxury look even if assets fail */
        function handleImageError(img) {
            img.onerror = null;
            img.src = 'https://i.ibb.co.com/Vcq9NZsL/Logo.png';
            img.style.opacity = '0.08';
            img.style.filter = 'grayscale(1) contrast(1.1)';
            img.style.scale = '0.7';
            // Enhance the parent background with a shimmering luxury radial gradient if it's a shop or detail view
            if (img.parentElement && (img.parentElement.classList.contains('image-container') || img.parentElement.style.aspectRatio)) {
                img.parentElement.style.background = 'radial-gradient(circle at center, rgba(203, 163, 92, 0.15) 0%, rgba(2, 6, 6, 1) 100%)';
            }
        }

        function setFilter(filter) {
            currentFilter = filter;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if(btn.dataset.filter === filter) btn.classList.add('active');
                else btn.classList.remove('active');
            });
            renderShop();
        }

        function renderShop() {
            const list = document.getElementById('product-list');
            const filtered = currentFilter === 'All' ? products : products.filter(p => p.gender === currentFilter);
            
            list.innerHTML = filtered.map(p => `
                <div class="product-card interactive" onclick="showView('details', ${p.id})">
                    <div class="image-container">
                        <img src="${p.img}" alt="${p.name}" loading="lazy" onerror="handleImageError(this)">
                    </div>
                    <div style="display:flex; justify-content:space-between; align-items:baseline; margin-bottom:12px;">
                        <h3 style="font-size:1.15rem; text-transform:uppercase; letter-spacing:2px; font-weight:400;">${p.name}</h3>
                        <span style="color:var(--gold-primary); font-weight:700; font-size:1rem;">${PRICE_3ML_BDT}৳</span>
                    </div>
                    <p style="font-size:0.65rem; color:var(--gold-muted); text-transform:uppercase; letter-spacing:3px;">${p.desc}</p>
                </div>
            `).join('');
            if (window.lucide) lucide.createIcons();
        }

        function showView(view, id) {
            const main = document.getElementById('main-view');
            const detailView = document.getElementById('details-view');
            const checkoutView = document.getElementById('checkout-view');
            const currentView = main.style.display !== 'none' ? 'main' : 
                                detailView.style.display !== 'none' ? 'details' : 
                                checkoutView.style.display !== 'none' ? 'checkout' : '';
            main.style.display = 'none';
            detailView.style.display = 'none';
            checkoutView.style.display = 'none';
            if(view === 'details') {
                const p = products.find(x => x.id === id);
                selectedSize = '3ml'; 
                renderDetails(p);
                detailView.style.display = 'block';
            } else if (view === 'checkout') {
                checkoutView.style.display = 'block';
                renderCheckout();
            } else {
                main.style.display = 'block';
            }
            if (currentView !== view && currentView !== '') window.scrollTo({ top: 0, behavior: 'auto' });
        }

        function setSize(size, productId, el) {
            selectedSize = size;
            document.querySelectorAll('.size-btn').forEach(btn => btn.classList.remove('active'));
            if (el) el.classList.add('active');
            document.getElementById('detail-price').innerText = `${size === '3ml' ? PRICE_3ML_BDT : PRICE_6ML_BDT}৳`;
        }

        function renderDetails(p) {
            document.getElementById('details-content').innerHTML = `
                <div>
                    <div style="background:var(--bg-accent); border:1px solid var(--border-gold); aspect-ratio:1/1; display:flex; align-items:center; justify-content:center; padding:clamp(20px, 8vw, 80px); box-shadow: var(--shadow-medium); position: relative;">
                        <img src="${p.img}" style="max-width:90%; max-height:90%; object-fit:contain; filter: drop-shadow(0 20px 40px rgba(0,0,0,0.6));" onerror="handleImageError(this)">
                    </div>
                    <div>
                        <span onclick="showView('main')" style="cursor:pointer; color:var(--gold-primary); font-size:0.75rem; text-transform:uppercase; letter-spacing:5px; display:inline-flex; align-items:center; gap:15px; margin-bottom:40px;" class="interactive">
                            <i data-lucide="arrow-left" size="18"></i> Back to library
                        </span>
                        <h2 style="font-size:clamp(2.2rem, 6vw, 4.5rem); margin-bottom:20px; text-transform: uppercase;">${p.name}</h2>
                        <div id="detail-price" style="font-size:clamp(1.8rem, 4vw, 2.5rem); color:var(--gold-primary); font-weight: 700; margin-bottom:40px; letter-spacing:2px;">${PRICE_3ML_BDT}৳</div>
                        <p style="text-transform:uppercase; font-size:0.7rem; color:var(--gold-muted); letter-spacing:4px; margin-bottom:20px; font-weight:600;">Selection Volume</p>
                        <div style="display:flex; gap:20px; margin-bottom: 50px;">
                            <button class="size-btn active interactive" onclick="setSize('3ml', ${p.id}, this)">3 mL Volume</button>
                            <button class="size-btn interactive" onclick="setSize('6ml', ${p.id}, this)">6 mL Volume</button>
                        </div>
                        <p style="font-style:italic; color:var(--text-dim); margin-bottom:30px; border-left:2px solid var(--gold-primary); padding-left:30px; font-size:clamp(1rem, 3vw, 1.2rem); font-family:'Playfair Display'; opacity:0.8;">"${p.vibe}"</p>
                        <p style="color:var(--text-dim); margin-bottom:50px; line-height: 2; font-size:1.05rem;">Masterfully blended notes of ${p.desc}. Every drop is a testament to quality, curated for those who seek the extraordinary and demand only the finest.</p>
                        <button class="btn-gold interactive" style="width:100%; padding:25px; font-weight:700;" onclick="addToCart(${p.id})">Add to Selection</button>
                    </div>
                </div>
            `;
            if (window.lucide) lucide.createIcons();
        }

        function toggleCart(open) {
            const overlay = document.getElementById('cart-overlay');
            if(open) {
                overlay.classList.add('open');
                document.body.classList.add('no-cursor');
                renderCart();
            } else {
                overlay.classList.remove('open');
                document.body.classList.remove('no-cursor');
            }
        }

        function addToCart(id) {
            const p = products.find(x => x.id === id);
            const currentPrice = selectedSize === '3ml' ? PRICE_3ML_BDT : PRICE_6ML_BDT;
            const cartId = `${id}-${selectedSize}`;
            const exists = cart.find(x => x.cartId === cartId);
            if(exists) exists.qty++;
            else cart.push({ ...p, cartId, selectedSize, activePrice: currentPrice, qty: 1 });
            updateCartCount();
            saveCartToStorage();
            toggleCart(true);
        }

        function changeQty(cartId, delta) {
            const item = cart.find(i => i.cartId === cartId);
            if (!item) return;
            item.qty = Math.max(0, item.qty + delta);
            if (item.qty === 0) cart = cart.filter(i => i.cartId !== cartId);
            saveCartToStorage();
            renderCart();
            updateCartCount();
        }

        function renderCart() {
            const cont = document.getElementById('cart-items');
            cont.innerHTML = cart.length ? '' : '<div style="text-align:center; opacity:0.3; margin-top:140px;"><i data-lucide="shopping-bag" size="48" style="margin-bottom:20px;"></i><p style="letter-spacing:5px; text-transform:uppercase; font-size:0.75rem;">Your library is empty</p></div>';
            let subtotal = 0;
            cart.forEach((item, index) => {
                subtotal += item.activePrice * item.qty;
                const div = document.createElement('div');
                div.className = 'cart-item';
                div.style.cssText = 'display:flex; align-items:center; gap:20px; margin-bottom:30px; padding-bottom:30px; border-bottom:1px solid var(--border-gold)';
                /* Sequential entrance delay as requested */
                div.style.animationDelay = `${index * 0.08}s`;
                div.innerHTML = `
                    <div style="width:70px; height:70px; background:var(--bg-accent); display:flex; align-items:center; justify-content:center; flex-shrink:0; border:1px solid var(--border-white);">
                        <img src="${item.img}" style="max-width:80%; max-height:80%; object-fit:contain" onerror="handleImageError(this)">
                    </div>
                    <div style="flex:1">
                        <h4 style="font-size:0.95rem; margin-bottom:5px; text-transform:uppercase; letter-spacing:1px; font-weight:400;">${item.name}</h4>
                        <p style="font-size:0.75rem; color:var(--gold-muted); margin-bottom:10px; letter-spacing:1px;">${item.selectedSize} Essence • ${item.activePrice}৳</p>
                        <div class="qty-controls" style="width:fit-content; padding: 4px 12px; gap: 12px;">
                            <button class="qty-btn interactive" onclick="changeQty('${item.cartId}', -1)"><i data-lucide="minus" size="14"></i></button>
                            <div style="font-weight:700; min-width:15px; text-align:center; font-size: 0.8rem;">${item.qty}</div>
                            <button class="qty-btn interactive" onclick="changeQty('${item.cartId}', 1)"><i data-lucide="plus" size="14"></i></button>
                        </div>
                    </div>
                    <div style="display:flex; flex-direction:column; align-items:flex-end; gap:15px;">
                        <span style="font-weight:700; color:var(--gold-primary); font-size: 0.9rem;">${item.activePrice * item.qty}৳</span>
                        <i data-lucide="trash-2" size="18" style="cursor:pointer; color:rgba(255,255,255,0.2);" onclick="changeQty('${item.cartId}', -${item.qty})" class="interactive"></i>
                    </div>
                `;
                cont.appendChild(div);
            });
            document.getElementById('cart-total').innerText = `${subtotal}৳`;
            if (window.lucide) lucide.createIcons();
        }

        function updateCartCount() {
            document.getElementById('cart-count').innerText = cart.reduce((a,b) => a+b.qty, 0);
        }

        function renderCheckout() {
            const itemsEl = document.getElementById('checkout-items');
            itemsEl.innerHTML = '';
            let subtotal = 0;
            cart.forEach(item => {
                subtotal += item.activePrice * item.qty;
                const row = document.createElement('div');
                row.style = 'display:flex; gap:15px; align-items:center; margin-bottom:20px;';
                row.innerHTML = `
                    <div style="width:55px; height:55px; background:var(--bg-accent); display:flex; align-items:center; justify-content:center; border: 1px solid var(--border-gold); flex-shrink: 0;">
                        <img src="${item.img}" style="max-width:80%; max-height:80%; object-fit:contain" onerror="handleImageError(this)">
                    </div>
                    <div style="flex:1">
                        <div style="font-weight:400; text-transform:uppercase; font-size:0.85rem; letter-spacing:1px;">${item.name}</div>
                        <div style="color:var(--gold-muted); font-size:0.75rem;">${item.qty} units x ${item.selectedSize}</div>
                    </div>
                    <div style="font-weight:700; color:var(--gold-primary); font-size:0.95rem;">${item.activePrice * item.qty}৳</div>
                `;
                itemsEl.appendChild(row);
            });
            const shipping = subtotal === 0 ? 0 : (subtotal >= 2000 ? 0 : 70);
            document.getElementById('checkout-subtotal').innerText = `${subtotal}৳`;
            document.getElementById('checkout-shipping').innerText = `${shipping}৳`;
            document.getElementById('checkout-total').innerText = `${subtotal + shipping}৳`;
        }

        function checkout() { toggleCart(false); showView('checkout'); }

        async function placeOrder() {
            const order = {
                id: 'LB' + Date.now(),
                name: document.getElementById('billing-name').value,
                phone: document.getElementById('billing-phone').value,
                email: document.getElementById('billing-email').value,
                city: document.getElementById('billing-city').value,
                address: document.getElementById('billing-address').value,
                notes: "",
                items: cart,
                total: document.getElementById('checkout-total').innerText
            };
            const overlay = document.createElement('div');
            overlay.className = 'confirm-overlay';
            overlay.innerHTML = `<div class="confirm-box" style="border-radius:1px; border:1px solid var(--gold-primary);"><h2 style="letter-spacing:10px; color:var(--gold-primary);">TRANSMITTING</h2><p style="margin-top:25px; color:var(--text-dim); letter-spacing:3px; text-transform:uppercase; font-size:0.75rem;">Finalizing your olfactory selection...</p></div>`;
            document.body.appendChild(overlay);
            setTimeout(() => overlay.classList.add('show'), 10);
            try {
                await fetch(APPS_SCRIPT_EXEC_URL, { method: "POST", body: JSON.stringify(order) });
            } catch (err) { console.error("Order logging failed", err); }
            setTimeout(() => {
                overlay.querySelector('.confirm-box').innerHTML = `<i data-lucide="check" size="72" color="#cba35c" style="margin-bottom:20px;"></i><h2 style="margin-top:20px; letter-spacing:10px;">SECURED</h2><p style="margin-top:15px; color:var(--gold-muted); text-transform:uppercase; letter-spacing:4px; font-size:0.7rem;">Your order ${order.id} is being prepared.</p>`;
                lucide.createIcons();
                setTimeout(() => {
                    alert(`Thank you ${order.name}. Your selection has been secured and a confirmation will follow.`);
                    cart = [];
                    saveCartToStorage();
                    updateCartCount();
                    showView('main');
                    overlay.remove();
                }, 2500);
            }, 1800);
        }

        window.addEventListener('scroll', () => {
            const scrollY = window.scrollY;
            const progress = (scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
            const scrollProgressEl = document.getElementById('scroll-progress');
            if(scrollProgressEl) scrollProgressEl.style.width = progress + '%';
            const navbar = document.getElementById('navbar');
            if(navbar) navbar.classList.toggle('scrolled', scrollY > 80);
            const backToTop = document.getElementById('back-to-top');
            if(backToTop) backToTop.classList.toggle('visible', scrollY > 600);
            const bgText = document.querySelector('.hero-bg-text');
            if(bgText) bgText.style.transform = `translateX(${scrollY * 0.12}px)`;
        });

        document.addEventListener('mousemove', (e) => {
            const cursor = document.getElementById('custom-cursor');
            if(cursor) {
                cursor.style.left = e.clientX + 'px';
                cursor.style.top = e.clientY + 'px';
            }
        });

        window.addEventListener('DOMContentLoaded', () => {
            loadCartFromStorage();
            updateCartCount();
            renderShop();
        });
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>
